!function(a,b){"function"==typeof define&&define.amd?define(["react"],b):"object"==typeof exports?module.exports=b(require("react")):a.ReactSlider=b(a.React)}(this,function(a){function b(a){return a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1,!1}function c(a){a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0}function d(a,b,c){for(var d=(b-a)/(c-1),e=[],f=0;f<c;f++)e.push(a+d*f);return e}function e(a){return null==a?[]:Array.isArray(a)?a:[a]}function f(a){return null!=a&&1===a.length?a[0]:a}var g=a.createClass({displayName:"ReactSlider",propTypes:{min:a.PropTypes.number,max:a.PropTypes.number,step:a.PropTypes.number,minDistance:a.PropTypes.number,defaultValue:a.PropTypes.oneOfType([a.PropTypes.number,a.PropTypes.arrayOf(a.PropTypes.number)]),value:a.PropTypes.oneOfType([a.PropTypes.number,a.PropTypes.arrayOf(a.PropTypes.number)]),orientation:a.PropTypes.oneOf(["horizontal","vertical"]),className:a.PropTypes.string,handleClassName:a.PropTypes.string,handleActiveClassName:a.PropTypes.string,withBars:a.PropTypes.bool,barClassName:a.PropTypes.string,pearling:a.PropTypes.bool,disabled:a.PropTypes.bool,snapDragDisabled:a.PropTypes.bool,invert:a.PropTypes.bool,onBeforeChange:a.PropTypes.func,onChange:a.PropTypes.func,onAfterChange:a.PropTypes.func,onSliderClick:a.PropTypes.func},getDefaultProps:function(){return{min:0,max:100,step:1,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",handleClassName:"handle",handleActiveClassName:"active",barClassName:"bar",withBars:!1,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1}},getInitialState:function(){var a=this._or(e(this.props.value),e(this.props.defaultValue));this.tempArray=a.slice();for(var b=[],c=0;c<a.length;c++)a[c]=this._trimAlignValue(a[c],this.props),b.push(c);return{index:-1,upperBound:0,sliderLength:0,value:a,zIndices:b}},componentWillReceiveProps:function(a){var b=this._or(e(a.value),this.state.value);this.tempArray=b.slice();for(var c=0;c<b.length;c++)this.state.value[c]=this._trimAlignValue(b[c],a);this.state.value.length>b.length&&(this.state.value.length=b.length),0===this.state.upperBound&&this._handleResize()},_or:function(b,c){var e=a.Children.count(this.props.children);switch(e){case 0:return b.length>0?b:c;case b.length:return b;case c.length:return c;default:return b.length===e&&c.length===e||console.warn(this.constructor.displayName+": Number of values does not match number of children."),d(this.props.min,this.props.max,e)}},componentDidMount:function(){window.addEventListener("resize",this._handleResize),this._handleResize()},componentWillUnmount:function(){window.removeEventListener("resize",this._handleResize)},getValue:function(){return f(this.state.value)},_handleResize:function(){window.setTimeout(function(){var a=this.refs.slider,b=this.refs.handle0,c=a.getBoundingClientRect(),d=this._sizeKey(),e=c[this._posMaxKey()],f=c[this._posMinKey()];this.setState({upperBound:a[d],sliderLength:Math.abs(e-f),handleSize:b[d],sliderStart:this.props.invert?e:f})}.bind(this),0)},_calcOffset:function(a){var b=(a-this.props.min)/(this.props.max-this.props.min);return b*this.state.upperBound},_calcValue:function(a){var b=a/this.state.upperBound;return b*(this.props.max-this.props.min)+this.props.min},_buildHandleStyle:function(a,b){var c={position:"absolute",willChange:this.state.index>=0?this._posMinKey():"",zIndex:this.state.zIndices.indexOf(b)+1};return c[this._posMinKey()]=a+"px",c},_buildBarStyle:function(a,b){var c={position:"absolute",willChange:this.state.index>=0?this._posMinKey()+","+this._posMaxKey():""};return c[this._posMinKey()]=a,c[this._posMaxKey()]=b,c},_getClosestIndex:function(a){for(var b=Number.MAX_VALUE,c=-1,d=this.state.value,e=d.length,f=0;f<e;f++){var g=this._calcOffset(d[f]),h=Math.abs(a-g);h<b&&(b=h,c=f)}return c},_calcOffsetFromPosition:function(a){var b=a-this.state.sliderStart;return this.props.invert&&(b=this.state.sliderLength-b),b-=this.state.handleSize/2},_forceValueFromPosition:function(a,b){var c=this._calcOffsetFromPosition(a),d=this._getClosestIndex(c),e=this._trimAlignValue(this._calcValue(c)),f=this.state.value.slice();f[d]=e;for(var g=0;g<f.length-1;g+=1)if(f[g+1]-f[g]<this.props.minDistance)return;this.setState({value:f},b.bind(this,d))},_getMousePosition:function(a){return[a["page"+this._axisKey()],a["page"+this._orthogonalAxisKey()]]},_getTouchPosition:function(a){var b=a.touches[0];return[b["page"+this._axisKey()],b["page"+this._orthogonalAxisKey()]]},_getMouseEventMap:function(){return{mousemove:this._onMouseMove,mouseup:this._onMouseUp}},_getTouchEventMap:function(){return{touchmove:this._onTouchMove,touchend:this._onTouchEnd}},_createOnMouseDown:function(a){return function(c){if(!this.props.disabled){var d=this._getMousePosition(c);this._start(a,d[0]),this._addHandlers(this._getMouseEventMap()),b(c)}}.bind(this)},_createOnTouchStart:function(a){return function(b){if(!(this.props.disabled||b.touches.length>1)){var d=this._getTouchPosition(b);this.startPosition=d,this.isScrolling=void 0,this._start(a,d[0]),this._addHandlers(this._getTouchEventMap()),c(b)}}.bind(this)},_addHandlers:function(a){for(var b in a)document.addEventListener(b,a[b],!1)},_removeHandlers:function(a){for(var b in a)document.removeEventListener(b,a[b],!1)},_start:function(a,b){document.activeElement&&document.activeElement!=document.body&&document.activeElement.blur(),this.hasMoved=!1,this._fireChangeEvent("onBeforeChange");var c=this.state.zIndices;c.splice(c.indexOf(a),1),c.push(a),this.setState({startValue:this.state.value[a],startPosition:b,index:a,zIndices:c})},_onMouseUp:function(a){this._onEnd(this._getMouseEventMap()),b(a)},_onTouchEnd:function(){this._onEnd(this._getTouchEventMap())},_onEnd:function(a){this._removeHandlers(a),this.setState({index:-1},this._fireChangeEvent.bind(this,"onAfterChange"))},_onMouseMove:function(a){var c=this._getMousePosition(a);this._move(c[0]),b(a)},_onTouchMove:function(a){if(!(a.touches.length>1)){var c=this._getTouchPosition(a);if("undefined"==typeof this.isScrolling){var d=c[0]-this.startPosition[0],e=c[1]-this.startPosition[1];this.isScrolling=Math.abs(e)>Math.abs(d)}if(this.isScrolling)return void this.setState({index:-1});b(a),this._move(c[0])}},_move:function(a){this.hasMoved=!0;var b=this.props,c=this.state,d=c.index,e=c.value,f=e.length,g=e[d],h=a-c.startPosition;b.invert&&(h*=-1);var i=h/(c.sliderLength-c.handleSize)*(b.max-b.min),j=this._trimAlignValue(c.startValue+i),k=b.minDistance;if(!b.pearling){if(d>0){var l=e[d-1];j<l+k&&(j=l+k)}if(d<f-1){var m=e[d+1];j>m-k&&(j=m-k)}}e[d]=j,b.pearling&&f>1&&(j>g?(this._pushSucceeding(e,k,d),this._trimSucceeding(f,e,k,b.max)):j<g&&(this._pushPreceding(e,k,d),this._trimPreceding(f,e,k,b.min))),j!==g&&this.setState({value:e},this._fireChangeEvent.bind(this,"onChange"))},_pushSucceeding:function(a,b,c){var d,e;for(d=c,e=a[d]+b;null!=a[d+1]&&e>a[d+1];d++,e=a[d]+b)a[d+1]=this._alignValue(e)},_trimSucceeding:function(a,b,c,d){for(var e=0;e<a;e++){var f=d-e*c;b[a-1-e]>f&&(b[a-1-e]=f)}},_pushPreceding:function(a,b,c){var d,e;for(d=c,e=a[d]-b;null!=a[d-1]&&e<a[d-1];d--,e=a[d]-b)a[d-1]=this._alignValue(e)},_trimPreceding:function(a,b,c,d){for(var e=0;e<a;e++){var f=d+e*c;b[e]<f&&(b[e]=f)}},_axisKey:function(){var a=this.props.orientation;return"horizontal"===a?"X":"vertical"===a?"Y":void 0},_orthogonalAxisKey:function(){var a=this.props.orientation;return"horizontal"===a?"Y":"vertical"===a?"X":void 0},_posMinKey:function(){var a=this.props.orientation;return"horizontal"===a?this.props.invert?"right":"left":"vertical"===a?this.props.invert?"bottom":"top":void 0},_posMaxKey:function(){var a=this.props.orientation;return"horizontal"===a?this.props.invert?"left":"right":"vertical"===a?this.props.invert?"top":"bottom":void 0},_sizeKey:function(){var a=this.props.orientation;return"horizontal"===a?"clientWidth":"vertical"===a?"clientHeight":void 0},_trimAlignValue:function(a,b){return this._alignValue(this._trimValue(a,b),b)},_trimValue:function(a,b){return b=b||this.props,a<=b.min&&(a=b.min),a>=b.max&&(a=b.max),a},_alignValue:function(a,b){b=b||this.props;var c=(a-b.min)%b.step,d=a-c;return 2*Math.abs(c)>=b.step&&(d+=c>0?b.step:-b.step),parseFloat(d.toFixed(5))},_renderHandle:function(b,c,d){var e=this.props.handleClassName+" "+(this.props.handleClassName+"-"+d)+" "+(this.state.index===d?this.props.handleActiveClassName:"");return a.createElement("div",{ref:"handle"+d,key:"handle"+d,className:e,style:b,onMouseDown:this._createOnMouseDown(d),onTouchStart:this._createOnTouchStart(d)},c)},_renderHandles:function(b){for(var c=b.length,d=this.tempArray,e=0;e<c;e++)d[e]=this._buildHandleStyle(b[e],e);var f=this.tempArray,g=this._renderHandle;if(a.Children.count(this.props.children)>0)a.Children.forEach(this.props.children,function(a,b){f[b]=g(d[b],a,b)});else for(e=0;e<c;e++)f[e]=g(d[e],null,e);return f},_renderBar:function(b,c,d){return a.createElement("div",{key:"bar"+b,ref:"bar"+b,className:this.props.barClassName+" "+this.props.barClassName+"-"+b,style:this._buildBarStyle(c,this.state.upperBound-d)})},_renderBars:function(a){var b=[],c=a.length-1;b.push(this._renderBar(0,0,a[0]));for(var d=0;d<c;d++)b.push(this._renderBar(d+1,a[d],a[d+1]));return b.push(this._renderBar(c+1,a[c],this.state.upperBound)),b},_onSliderMouseDown:function(a){if(!this.props.disabled){if(this.hasMoved=!1,!this.props.snapDragDisabled){var c=this._getMousePosition(a);this._forceValueFromPosition(c[0],function(a){this._fireChangeEvent("onChange"),this._start(a,c[0]),this._addHandlers(this._getMouseEventMap())}.bind(this))}b(a)}},_onSliderClick:function(a){if(!this.props.disabled&&this.props.onSliderClick&&!this.hasMoved){var b=this._getMousePosition(a),c=this._trimAlignValue(this._calcValue(this._calcOffsetFromPosition(b[0])));this.props.onSliderClick(c)}},_fireChangeEvent:function(a){this.props[a]&&this.props[a](f(this.state.value))},render:function(){for(var b=this.state,c=this.props,d=this.tempArray,e=b.value,f=e.length,g=0;g<f;g++)d[g]=this._calcOffset(e[g],g);var h=c.withBars?this._renderBars(d):null,i=this._renderHandles(d);return a.createElement("div",{ref:"slider",style:{position:"relative"},className:c.className+(c.disabled?" disabled":""),onMouseDown:this._onSliderMouseDown,onClick:this._onSliderClick},h,i)}});return g});